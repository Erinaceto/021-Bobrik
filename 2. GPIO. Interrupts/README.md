# 2. Структура проекта. GPIO. Прерывания

## Поставленные задачи
1. Перепишите ДЗ с прошлого урока так, чтобы светодиод переключался по прерыванию при нажатии кнопки.
2. Вынесите в отдельный файл функции инициализации светодиода (void init_led(GPIO_TypeDef* port, uint16_t pin)) и обработчик прерывания.

## Переписать проект под кнопку
1. Для того, чтобы добавить кнопку, её нужно подключить

![Scheme with LED and Button](./Images/Scheme.png)

2. Далее создаём проект и настраеиваем необходимые пиныЖ PA10 - LED, настраивается как GPIO-Output, PA9 - BTN, настраивается как GPIO-EXTI9
3. Настраиваем LED вывод:

![LED settings](./Images/LED_Settings.png)

И вывод BTN: без подтяжки и прерывание по подъёму сигнала

![BTN settings](./Images/BTN_Scheme.png)

4. После настраиваем NVIC контроллер (пусть будет приоритет 3)

![NVIC settings](./Images/NVIC_Settings.png)

5. Итог: светодиод переключается по нажатию кнопки.

## Вынести модули инициализации светодиода и обработчика прерываний

1. Сама инициализация светодиода состоит из включения нужного порта и конфигурирования соттветствующего пина. Но для начала необходимо создать пару файлов led.h и led.c, в которых будут лежать соотвественно прототипы и реализации функций. Оба файла должны включать в себя библиотеку HAL для определения типа данных GPIO и stdint для фиксированных типов. В файл "led.c" так же положил колбек прерывания

![LED.h file](./Images/LED_H.png)

![LED.c file](./Images/LED_C.png)

2. Похожую процедуру провёл и для инициализации кнопки

![Button.h file](./Images/BUTTON_H.png)

![Button.C file](./Images/BUTTON_C.png)

3. После сгенерированной инициализации поместил свою

![Init custom](./Images/Init.png)

4. Итог: светодиод так же переключается по прерыванию нажатия кнопки