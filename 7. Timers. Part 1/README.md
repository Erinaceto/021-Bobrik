# Таймеры

## Задание
1) С помощью энкодера управлять яркостью свечения светодиода

## Управление ШИМ сигналом с помощью энкодера
1) Схема подключения светодиода к выводу МК стандартна, потому приводить тут смысла не вижу. С энкодером позже.
2) Таймер 1 можно настроить так, чтобы он сам мог работать с энкодером без помощи ядра. Для этого нужно включить специальный Encoder Mode

![Режим энкодер](./Images/Encoder%20mode.png)

После чего для этого выделяются специальные выводы

![Выводы для энкодера](./Images/Encoder%20pins.png)

3) Воспользовался энкодером из набота Arduino KY-040 EM-407, так как в этом модуле выводы подтянуты к питанию, и не надо городить огороды на макетке. Достаточно подключить питание, землю.
А выводы CLK и DT к каналам 1 и 2 таймера 1 соотвественно

4) Для ШИМ выбран таймер 11. Так как он самый простой из тех, кто умеет генерировать ШИМ. Нужно активировать таймер, и указать режим ШИМ с выводом на 1 канал. 
Делитель выбран 15, период выбран 99. Так же указал Chanel polarity: Low, так как светодиод подключен к питанию а не к земле.
Для таймера 1 делитель 0, Период 100, чтобы можно было получить 100% коэффициент заполнения ШИМ.

![Настройки таймера 11](./Images/Timer%2011%20PWM%20mode.png)

5) В цикле main нужно лишь включить эти таймеры и в цикле while присваивать значение CNT из таймера 1 в CCR таймера 11.

![Включение таймеров и передача значение из CRN в CCR](./Images/Main%20program.png)

6) Результат: Светодиод горит и его яркостью можно управлять с помощью энкодера